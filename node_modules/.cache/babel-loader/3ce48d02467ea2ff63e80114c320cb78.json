{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-588541b6\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = {\n  class: \"navbar navbar-dark bg-darker sticky-top\"\n};\nconst _hoisted_2 = {\n  class: \"d-flex justify-content-between\"\n};\nconst _hoisted_3 = {\n  class: \"mr-3\"\n};\nconst _hoisted_4 = [\"disabled\"];\n\nconst _hoisted_5 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fad fa-coins\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\")\");\n\nconst _hoisted_7 = [\"onClick\", \"disabled\"];\n\nconst _hoisted_8 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fad fa-coins\"\n}, null, -1\n/* HOISTED */\n));\n\nconst _hoisted_9 = /*#__PURE__*/_createTextVNode(\")\");\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"nav\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"a\", {\n    class: \"btn btn-sm btn-outline-secondary\",\n    onClick: _cache[0] || (_cache[0] = $event => $options.changeShop('sell'))\n  }, \"Sell\"), _createElementVNode(\"a\", {\n    class: \"btn btn-sm btn-outline-secondary\",\n    onClick: _cache[1] || (_cache[1] = $event => $options.changeShop('general'))\n  }, \"Items\"), _createElementVNode(\"a\", {\n    class: \"btn btn-sm btn-outline-secondary\",\n    onClick: _cache[2] || (_cache[2] = $event => $options.changeShop('magic'))\n  }, \"Magic\")]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    class: \"btn btn-warning mr-2\",\n    onClick: _cache[3] || (_cache[3] = (...args) => $options.adventureOn && $options.adventureOn(...args))\n  }, \"Adventure On!\"), _createElementVNode(\"button\", {\n    class: \"btn btn-primary\",\n    onClick: _cache[4] || (_cache[4] = $event => $options.rest()),\n    disabled: $setup.state.playersGold < 50 * $setup.state.location + 50\n  }, [_createTextVNode(\"Rest (\" + _toDisplayString(50 * $setup.state.location + 50) + \" \", 1\n  /* TEXT */\n  ), _hoisted_5, _hoisted_6], 8\n  /* PROPS */\n  , _hoisted_4), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList($setup.state.revive, character => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      key: character.id\n    }, [_createElementVNode(\"button\", {\n      class: \"btn btn-secondary m-3\",\n      onClick: $event => $options.reviveCharacter(character.id),\n      disabled: $setup.state.playersGold < character.cost\n    }, [_createTextVNode(\"Revive \" + _toDisplayString(character.name) + \" (\" + _toDisplayString((character.hp - character.baseHp) * -10) + \" \", 1\n    /* TEXT */\n    ), _hoisted_8, _hoisted_9], 8\n    /* PROPS */\n    , _hoisted_7)]);\n  }), 128\n  /* KEYED_FRAGMENT */\n  ))])]);\n}","map":{"version":3,"mappings":";;;;;AACOA,OAAK,EAAC;;;AACJA,OAAK,EAAC;;;AAKNA,OAAK,EAAC;;;;gEAE2HC,oBAA4B,GAA5B,EAA4B;AAAzBD,OAAK,EAAC;AAAmB,CAA5B,EAAuB,IAAvB,EAAuB;AAAA;AAAvB;;iDAA4B;;;;gEAGvEC,oBAA4B,GAA5B,EAA4B;AAAzBD,OAAK,EAAC;AAAmB,CAA5B,EAAuB,IAAvB,EAAuB;AAAA;AAAvB;;iDAA4B;;;uBAXzHE,oBAcM,KAdN,cAcM,CAbJD,oBAIM,KAJN,cAIM,CAHJA,oBAAgF,GAAhF,EAAgF;AAA7ED,SAAK,EAAC,kCAAuE;AAAnCG,WAAK,sCAAEC,oBAAU,MAAV,CAAF;AAA8B,GAAhF,EAAwE,MAAxE,CAGI,EAFJH,oBAAoF,GAApF,EAAoF;AAAjFD,SAAK,EAAC,kCAA2E;AAAvCG,WAAK,sCAAEC,oBAAU,SAAV,CAAF;AAAkC,GAApF,EAA2E,OAA3E,CAEI,EADJH,oBAAkF,GAAlF,EAAkF;AAA/ED,SAAK,EAAC,kCAAyE;AAArCG,WAAK,sCAAEC,oBAAU,OAAV,CAAF;AAAgC,GAAlF,EAAyE,OAAzE,CACI,CAJN,CAaI,EARJH,oBAOM,KAPN,cAOM,CANJA,oBAAgF,QAAhF,EAAgF;AAAxED,SAAK,EAAC,sBAAkE;AAA1CG,WAAK,yCAAEC,qDAAF;AAAqC,GAAhF,EAA0D,eAA1D,CAMI,EALJH,oBAA0K,QAA1K,EAA0K;AAAlKD,SAAK,EAAC,iBAA4J;AAAzIG,WAAK,sCAAEC,eAAF,CAAoI;AAAzHC,YAAQ,EAAEC,aAAMC,WAAN,GAAiB,KAAMD,aAAME,QAAZ,GAAoB;AAA0E,GAA1K,oBAAqG,WAAMC,sBAAKH,aAAME,QAAX,GAAmB,EAAnB,CAAN,GAA8B,KAAC;AAAA;KAAAE,uBAApI;;AAAA,eAKI,qBAJJR,oBAGMS,SAHN,EAGM,IAHN,EAGMC,YAHmBN,aAAMO,MAGzB,EAHMC,SAAyB,IAAhB;yBAArBZ,oBAGM,KAHN,EAGM;AAHkCa,SAAG,EAAED,SAAS,CAACE;AAGjD,KAHN,GACEf,oBAC6H,QAD7H,EAC6H;AADrHD,WAAK,EAAC,uBAC+G;AADtFG,aAAK,YAAEC,yBAAgBU,SAAS,CAACE,EAA1B,CAC+E;AAD/CX,cAAQ,EAAEC,aAAMC,WAAN,GAA+BO,SAAS,CAACG;AACJ,KAD7H,oBACkB,YAAOR,iBAAEK,SAAS,CAACI,IAAZ,CAAP,GAAyB,IAAzB,GAA2BT,kBAAGK,SAAS,CAACK,EAAV,GAAeL,SAAS,CAACM,MAA5B,IAAkC,GAAlC,CAA3B,GAAoE,KAAC;AAAA;OAAAC,uBADvF;;AAAA,kBADF;GAGM,CAHN;;AAAA,GAII,EAPN,CAQI,CAdN","names":["class","_createElementVNode","_createElementBlock","onClick","$options","disabled","$setup","playersGold","location","_toDisplayString","_hoisted_5","_Fragment","_renderList","revive","character","key","id","cost","name","hp","baseHp","_hoisted_8"],"sourceRoot":"","sources":["C:\\Users\\dhild\\source\\mini-projects\\blades-of-desolation\\src\\components\\ShopNavBar.vue"],"sourcesContent":["<template>\r\n  <nav class=\"navbar navbar-dark bg-darker sticky-top\">\r\n    <div class=\"d-flex justify-content-between\">\r\n      <a class=\"btn btn-sm btn-outline-secondary\" @click=\"changeShop('sell')\">Sell</a>\r\n      <a class=\"btn btn-sm btn-outline-secondary\" @click=\"changeShop('general')\">Items</a>\r\n      <a class=\"btn btn-sm btn-outline-secondary\" @click=\"changeShop('magic')\">Magic</a>\r\n    </div>\r\n    <div class=\"mr-3\">\r\n      <button class=\"btn btn-warning mr-2\" @click=\"adventureOn\">Adventure On!</button>\r\n      <button class=\"btn btn-primary\" @click=\"rest()\" :disabled=\"state.playersGold < 50*state.location+50\">Rest ({{50*state.location+50}} <i class=\"fad fa-coins\"></i>)</button>\r\n      <div v-for=\"character in state.revive\" :key=\"character.id\">\r\n        <button class=\"btn btn-secondary m-3\" @click=\"reviveCharacter(character.id)\" :disabled=\"state.playersGold <\r\n          character.cost\">Revive {{character.name}} ({{(character.hp - character.baseHp)*-10}} <i class=\"fad fa-coins\"></i>)</button>\r\n      </div>\r\n    </div>\r\n  </nav>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from '@vue/reactivity'\r\nimport { computed } from \"@vue/runtime-core\"\r\nimport $store from \"@/store/index.js\"\r\nimport router from \"@/router\"\r\nimport { useToast } from \"vue-toastification\"\r\n\r\nexport default {\r\n  name: 'ShopNavBar',\r\n  setup() {\r\n    const state = reactive({\r\n      healPartyCost: computed(()=> Math.round($store.state.player.characters.map(c => c.hp > 0 ? c.baseHp - c.hp : 0).reduce((a, b) => a+b))),\r\n      restorePartyMagicCost: computed(()=> Math.round($store.state.player.characters.map(c => c.baseMagic > 0 ? c.baseMagic - c.magic : 0).reduce((a, b) => a+b)*3)),\r\n      revive: computed(()=> $store.state.player.characters.filter(c => c.hp < 1)),\r\n      playersGold: computed(()=> $store.state.player.gold),\r\n      location: computed(()=> $store.state.location)\r\n    })\r\n    return {\r\n      state\r\n    }\r\n  },\r\n  methods:{\r\n    reviveCharacter(id){\r\n      let deadCharacter = this.state.revive.find(dc => dc.id = id)\r\n      let cost = (deadCharacter.hp - deadCharacter.baseHp)*-10\r\n      this.$store.commit('reducePlayerGold', cost)\r\n      this.$store.state.player.characters.forEach(c => c.id == id ? c.hp = c.baseHp : '')\r\n    },\r\n    healParty(){\r\n      this.$store.commit('reducePlayerGold', this.state.healPartyCost)\r\n      this.$store.state.player.characters.forEach(c => c.hp < c.baseHp && c.hp > 0 ? c.hp = c.baseHp : '')\r\n    },\r\n    RestorePartyMagic(){\r\n      this.$store.commit('reducePlayerGold', this.state.restorePartyMagicCost)\r\n      this.$store.state.player.characters.forEach(c => c.magic < c.baseMagic ? c.magic = c.baseMagic : '')\r\n    },\r\n    rest(){\r\n      const toast = useToast()\r\n      $store.state.player.characters.forEach(c => {\r\n        c.hp = c.baseHp\r\n        c.magic = c.baseMagic\r\n        c.abilities.forEach(a => a.uses = a.baseUses)\r\n        c.actions = c.baseActions\r\n        c.statusEffects = c.statusEffects.filter(se => !se.negative)\r\n      })\r\n      toast.success('Your party is Fully Rested!')\r\n    },\r\n    adventureOn(){\r\n      router.push({name: 'AreaLocation'})\r\n    },\r\n    changeShop(shop){\r\n      $store.state.shop = shop\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.bg-darker{\r\n  background-color: rgb(15, 15, 15);\r\n}\r\n@media screen and (min-width: 992px) {\r\n  .navbar{\r\n    position: fixed;\r\n    width: 80vw;\r\n    left: 20vw;\r\n  }\r\n}\r\n</style>\r\n"]},"metadata":{},"sourceType":"module"}