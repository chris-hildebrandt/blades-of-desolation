{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, createTextVNode as _createTextVNode, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\";\n\nconst _withScopeId = n => (_pushScopeId(\"data-v-a156b186\"), n = n(), _popScopeId(), n);\n\nconst _hoisted_1 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"row pt-2\"\n}, [/*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"col-12\"\n}, [/*#__PURE__*/_createElementVNode(\"h1\", {\n  for: \"buy\"\n}, \"Learn Spells\")])], -1));\n\nconst _hoisted_2 = {\n  class: \"row mh-100\"\n};\nconst _hoisted_3 = {\n  class: \"col-md-6 col-12\"\n};\nconst _hoisted_4 = {\n  key: 0,\n  for: \"spells\"\n};\nconst _hoisted_5 = [\"onClick\", \"title\"];\n\nconst _hoisted_6 = /*#__PURE__*/_withScopeId(() => /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fad fa-coins\"\n}, null, -1));\n\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_hoisted_1, _createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList($props.spellList, spells => {\n    return _openBlock(), _createElementBlock(\"ul\", {\n      key: spells\n    }, [spells.length > 0 ? (_openBlock(), _createElementBlock(\"label\", _hoisted_4, _toDisplayString(spells[0].level > 0 ? \"Level \" + spells[0].level : 'Cantrip') + \" Spells\", 1)) : _createCommentVNode(\"\", true), (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(spells, spell => {\n      return _openBlock(), _createElementBlock(\"li\", {\n        key: spell.name,\n        onClick: $event => $options.buySpell(spell),\n        title: spell.title ?? $options.getTitle(spell)\n      }, [_createTextVNode(_toDisplayString(spell.name) + \" - \" + _toDisplayString(spell.price ?? spell.level * 1000 + 1000) + \" \", 1), _hoisted_6], 8, _hoisted_5);\n    }), 128))]);\n  }), 128))])])], 64);\n}","map":{"version":3,"mappings":";;;;gEACEA,oBAIM,KAJN,EAIM;AAJDC,OAAK,EAAC;AAIL,CAJN,EAAqB,cACnBD,oBAEM,KAFN,EAEM;AAFDC,OAAK,EAAC;AAEL,CAFN,EAAmB,cACjBD,oBAA+B,IAA/B,EAA+B;AAA3BE,KAAG,EAAC;AAAuB,CAA/B,EAAc,cAAd,CADiB,CAAnB,CADmB,CAArB;;;AAKKD,OAAK,EAAC;;;AACJA,OAAK,EAAC;;;;AAEAC,KAAG,EAAC;;;;gEAC8JF,oBAA4B,GAA5B,EAA4B;AAAzBC,OAAK,EAAC;AAAmB,CAA5B,EAAuB,IAAvB,EAAuB,EAAvB;;;6DAT/KE,YAKAH,oBAOM,KAPN,cAOM,CANJA,oBAKM,KALN,cAKM,oBAJJI,oBAGKC,SAHL,EAGK,IAHL,EAGKC,YAHgBC,gBAGhB,EAHMC,MAAmB,IAAb;yBAAjBJ,oBAGK,IAHL,EAGK;AAH4BK,SAAG,EAAED;AAGjC,KAHL,EAA4C,CAChBA,MAAM,CAACE,MAAP,GAAa,mBAAvCN,oBAA0H,OAA1H,cAA0HO,iBAA3EH,MAAM,GAAN,CAAUI,KAAV,GAAe,CAAf,GAAe,WAAgBJ,MAAM,GAAN,CAAUI,KAAzC,GAA8C,SAA6B,IAAf,SAA3G,EAAkH,CAAlH,kCAD0C,qBAE1CR,oBAA0MC,SAA1M,EAA0M,IAA1M,EAA0MC,YAAtLE,MAAsL,EAA/LK,KAAe,IAAV;2BAAhBT,oBAA0M,IAA1M,EAA0M;AAA7KK,WAAG,EAAEI,KAAK,CAACC,IAAkK;AAA3JC,eAAK,YAAEC,kBAASH,KAAT,CAAoJ;AAAlII,aAAK,EAAEJ,KAAK,CAACI,KAAN,IAAeD,kBAASH,KAAT;AAA4G,OAA1M,qCAAiHA,KAAK,CAACC,QAAM,QAAGH,iBAAEE,KAAK,CAACK,KAAN,IAAeL,KAAK,CAACD,KAAN,GAAW,IAAX,GAAW,IAA5B,IAAwC,KAAC,eAAzK;KAA0M,CAA1M,MAF0C,EAA5C;GAGK,CAHL,MAII,EALN,CAMI,CAPN","names":["_createElementVNode","class","for","_hoisted_1","_createElementBlock","_Fragment","_renderList","$props","spells","key","length","_toDisplayString","level","spell","name","onClick","$options","title","price"],"sourceRoot":"","sources":["C:\\Users\\dhild\\source\\mini-projects\\blades-of-desolation\\src\\components\\MagicShop.vue"],"sourcesContent":["<template>\r\n  <div class=\"row pt-2\">\r\n    <div class=\"col-12\">\r\n      <h1 for=\"buy\">Learn Spells</h1>\r\n    </div>\r\n  </div>\r\n  <div class=\"row mh-100\">\r\n    <div class=\"col-md-6 col-12\">\r\n      <ul v-for=\"spells in spellList\" :key=\"spells\">\r\n        <label for=\"spells\" v-if=\"spells.length > 0\">{{spells[0].level > 0 ? \"Level \"+spells[0].level : 'Cantrip'}} Spells</label>\r\n        <li v-for=\"spell in spells\" :key=\"spell.name\" @click=\"buySpell(spell)\" :title=\"spell.title ?? getTitle(spell)\">{{spell.name}} - {{spell.price ?? spell.level*1000+1000}} <i class=\"fad fa-coins\"></i></li>\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from \"@vue/reactivity\"\r\nimport $store from \"@/store/index.js\"\r\nimport { spellsService } from \"@/services/SpellsService\"\r\nimport Notify from \"@/utils/Notify\"\r\nimport { useToast } from \"vue-toastification\"\r\nexport default {\r\nname: 'MagicShop',\r\nprops: {\r\n    spellList: {type: Object}\r\n},\r\nsetup(){\r\n  const state = reactive({\r\n  })\r\n  return state\r\n},\r\nmethods: {\r\n  async buySpell(spell){\r\n    const toast = useToast()\r\n    let price = spell.price ?? spell.level*1000+1000\r\n    if($store.state.player.gold < price){\r\n      toast.warning('Insufficient resources')\r\n      return\r\n    }\r\n    let description = spell.description ?? `Deals ${spell.strength} ${spell.dmgType} DMG to ${spell.areaEffect ? 'each ' : ''}enemy`\r\n    let char = await Notify.selectChar(spell.name, price, description)\r\n    if(char == 0 || !char){\r\n      return\r\n    }\r\n    let character = $store.state.player.characters.filter(c => c.id == char)[0]\r\n    this.$store.commit('reducePlayerGold', price)\r\n    spellsService.learnSpell(spell.name, character)\r\n  },\r\n  getTitle(spell){\r\n    let title = ''\r\n    if(spell.strength){\r\n      title = spell.strength+' '+spell.dmgType+' dmg'\r\n    }else{\r\n      title = spell.buff ? '+' : '-'\r\n      title += spell.value+' '+spell.effect\r\n    }\r\n    title += spell.areaEffect ? ' (Mass effect)' :  ''\r\n    return title\r\n  }\r\n}\r\n}\r\n</script>\r\n\r\n<style scoped>\r\nli{\r\n  cursor: pointer;\r\n}\r\nlabel{\r\n  right: 9vw;\r\n  position: relative;\r\n  color:#00c700;\r\n  font-size: large;\r\n}\r\n.mh-100{\r\n  height: 75vh;\r\n  overflow-y: auto;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}