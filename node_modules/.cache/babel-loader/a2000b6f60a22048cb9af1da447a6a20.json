{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"container mt-5\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 1\n};\nconst _hoisted_4 = {\n  key: 2\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_GeneralShop = _resolveComponent(\"GeneralShop\");\n\n  const _component_SellShop = _resolveComponent(\"SellShop\");\n\n  const _component_MagicShop = _resolveComponent(\"MagicShop\");\n\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_ctx.activeShop == 'general' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_createVNode(_component_GeneralShop, {\n    storeItems: _ctx.storeItems\n  }, null, 8\n  /* PROPS */\n  , [\"storeItems\"])])) : _createCommentVNode(\"v-if\", true), _ctx.activeShop == 'sell' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_SellShop)])) : _createCommentVNode(\"v-if\", true), _ctx.activeShop == 'magic' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_createVNode(_component_MagicShop, {\n    spellList: _ctx.spellList\n  }, null, 8\n  /* PROPS */\n  , [\"spellList\"])])) : _createCommentVNode(\"v-if\", true)]);\n}","map":{"version":3,"mappings":";;AACOA,OAAK,EAAC;;;;;;;;;;;;;;;;;;uBAAXC,oBAUM,KAVN,cAUM,CATOC,mBAAU,2BAArBD,oBAEM,KAFN,EAEME,UAFN,EAEM,CADJC,aAAwCC,sBAAxC,EAAwC;AAA1BC,cAAU,EAAEJ;AAAc,GAAxC,EAAoC,IAApC,EAAoC;AAAA;AAApC,IAAoC,cAApC,CACI,CAFN,sCASI,EANOA,mBAAU,wBAArBD,oBAEM,KAFN,EAEMM,UAFN,EAEM,CADJH,aAAYI,mBAAZ,CACI,CAFN,sCAMI,EAHON,mBAAU,yBAArBD,oBAEM,KAFN,EAEMQ,UAFN,EAEM,CADJL,aAAoCM,oBAApC,EAAoC;AAAxBC,aAAS,EAAET;AAAa,GAApC,EAAgC,IAAhC,EAAgC;AAAA;AAAhC,IAAgC,aAAhC,CACI,CAFN,sCAGI,CAVN","names":["class","_createElementBlock","_ctx","_hoisted_2","_createVNode","_component_GeneralShop","storeItems","_hoisted_3","_component_SellShop","_hoisted_4","_component_MagicShop","spellList"],"sourceRoot":"","sources":["C:\\Users\\dhild\\source\\mini-projects\\blades-of-desolation\\src\\views\\MainShop.vue"],"sourcesContent":["<template>\r\n  <div class=\"container mt-5\">\r\n    <div v-if=\"activeShop == 'general'\">\r\n      <GeneralShop :storeItems=\"storeItems\" />\r\n    </div>\r\n    <div v-if=\"activeShop == 'sell'\">\r\n      <SellShop />\r\n    </div>\r\n    <div v-if=\"activeShop == 'magic'\">\r\n      <MagicShop :spellList=\"spellList\" />\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from \"@vue/reactivity\"\r\nimport { computed, onMounted } from \"@vue/runtime-core\"\r\nimport $store from \"@/store/index.js\"\r\nimport { itemsService } from \"@/services/ItemsService\"\r\nimport { getRarityFullName } from '@/utils/getRarityFullName'\r\nimport { questService } from \"@/services/QuestService\"\r\nimport { characterService } from \"@/services/CharacterService\"\r\nimport Notify from \"@/utils/Notify\"\r\nimport { spellsService } from \"@/services/SpellsService\"\r\nimport SellShop from \"@/components/SellShop.vue\"\r\nimport GeneralShop from \"@/components/GeneralShop.vue\"\r\nimport MagicShop from \"@/components/MagicShop.vue\"\r\nexport default {\r\n  name: 'MainShop',\r\n  components: {\r\n   SellShop, GeneralShop, MagicShop\r\n  },\r\n  setup(){\r\n    onMounted(async()=> {\r\n      // random chance to get a quest request \r\n      let luck = 1+characterService.getPartyLuck()\r\n      let chance = Math.ceil(Math.random()*25)\r\n      if(luck > chance && !$store.state.player.quest.objective){\r\n        let index = Math.floor(Math.random()*$store.state.quests.length)\r\n        let newQuest = questService.getQuest($store.state.quests[index])\r\n        // TODO make ability to accept up to 3 quests\r\n        if(await Notify.confirm(newQuest.objective, newQuest.target+' | Reward: '+newQuest.reward)){\r\n          $store.state.player.quest = newQuest\r\n        }\r\n      }\r\n      questService.checkQuestProgress()\r\n      $store.state.shopItems = itemsService.getStoreItems()\r\n    })\r\n    const state = reactive({\r\n      playersGold: computed(()=> $store.state.player.gold),\r\n      storeItems: computed(()=> $store.state.shopItems),\r\n      quest: null,\r\n      activeShop: computed(()=> $store.state.shop),\r\n      spellList: computed(()=> spellsService.getRandomSpellList()),\r\n    })\r\n    return state\r\n  },\r\n  methods: {\r\n    getRarityFullName : getRarityFullName\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\nli{\r\n  cursor: pointer;\r\n}\r\n.mh-100{\r\n  height: 75vh;\r\n  overflow-y: auto;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}