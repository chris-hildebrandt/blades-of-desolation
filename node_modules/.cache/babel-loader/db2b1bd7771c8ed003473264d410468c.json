{"ast":null,"code":"import * as dom from './dom/index.js';\nimport { swalClasses } from './classes.js';\nimport { fixScrollbar } from './scrollbarFix.js';\nimport { iOSfix } from './iosFix.js';\nimport { setAriaHidden } from './aria.js';\nimport globalState from '../globalState.js';\nexport const SHOW_CLASS_TIMEOUT = 10;\n/**\n * Open popup, add necessary classes and styles, fix scrollbar\n *\n * @param params\n */\n\nexport const openPopup = params => {\n  const container = dom.getContainer();\n  const popup = dom.getPopup();\n\n  if (typeof params.willOpen === 'function') {\n    params.willOpen(popup);\n  }\n\n  const bodyStyles = window.getComputedStyle(document.body);\n  const initialBodyOverflow = bodyStyles.overflowY;\n  addClasses(container, popup, params); // scrolling is 'hidden' until animation is done, after that 'auto'\n\n  setTimeout(() => {\n    setScrollingVisibility(container, popup);\n  }, SHOW_CLASS_TIMEOUT);\n\n  if (dom.isModal()) {\n    fixScrollContainer(container, params.scrollbarPadding, initialBodyOverflow);\n    setAriaHidden();\n  }\n\n  if (!dom.isToast() && !globalState.previousActiveElement) {\n    globalState.previousActiveElement = document.activeElement;\n  }\n\n  if (typeof params.didOpen === 'function') {\n    setTimeout(() => params.didOpen(popup));\n  }\n\n  dom.removeClass(container, swalClasses['no-transition']);\n};\n\nconst swalOpenAnimationFinished = event => {\n  const popup = dom.getPopup();\n\n  if (event.target !== popup) {\n    return;\n  }\n\n  const container = dom.getContainer();\n  popup.removeEventListener(dom.animationEndEvent, swalOpenAnimationFinished);\n  container.style.overflowY = 'auto';\n};\n\nconst setScrollingVisibility = (container, popup) => {\n  if (dom.animationEndEvent && dom.hasCssAnimation(popup)) {\n    container.style.overflowY = 'hidden';\n    popup.addEventListener(dom.animationEndEvent, swalOpenAnimationFinished);\n  } else {\n    container.style.overflowY = 'auto';\n  }\n};\n\nconst fixScrollContainer = (container, scrollbarPadding, initialBodyOverflow) => {\n  iOSfix();\n\n  if (scrollbarPadding && initialBodyOverflow !== 'hidden') {\n    fixScrollbar();\n  } // sweetalert2/issues/1247\n\n\n  setTimeout(() => {\n    container.scrollTop = 0;\n  });\n};\n\nconst addClasses = (container, popup, params) => {\n  dom.addClass(container, params.showClass.backdrop); // this workaround with opacity is needed for https://github.com/sweetalert2/sweetalert2/issues/2059\n\n  popup.style.setProperty('opacity', '0', 'important');\n  dom.show(popup, 'grid');\n  setTimeout(() => {\n    // Animate popup right after showing it\n    dom.addClass(popup, params.showClass.popup); // and remove the opacity workaround\n\n    popup.style.removeProperty('opacity');\n  }, SHOW_CLASS_TIMEOUT); // 10ms in order to fix #2062\n\n  dom.addClass([document.documentElement, document.body], swalClasses.shown);\n\n  if (params.heightAuto && params.backdrop && !params.toast) {\n    dom.addClass([document.documentElement, document.body], swalClasses['height-auto']);\n  }\n};","map":{"version":3,"sources":["C:/Users/dhild/source/mini-projects/blades-of-desolation/node_modules/sweetalert2/src/utils/openPopup.js"],"names":["dom","swalClasses","fixScrollbar","iOSfix","setAriaHidden","globalState","SHOW_CLASS_TIMEOUT","openPopup","params","container","getContainer","popup","getPopup","willOpen","bodyStyles","window","getComputedStyle","document","body","initialBodyOverflow","overflowY","addClasses","setTimeout","setScrollingVisibility","isModal","fixScrollContainer","scrollbarPadding","isToast","previousActiveElement","activeElement","didOpen","removeClass","swalOpenAnimationFinished","event","target","removeEventListener","animationEndEvent","style","hasCssAnimation","addEventListener","scrollTop","addClass","showClass","backdrop","setProperty","show","removeProperty","documentElement","shown","heightAuto","toast"],"mappings":"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","sourcesContent":["import * as dom from './dom/index.js'\nimport { swalClasses } from './classes.js'\nimport { fixScrollbar } from './scrollbarFix.js'\nimport { iOSfix } from './iosFix.js'\nimport { setAriaHidden } from './aria.js'\nimport globalState from '../globalState.js'\n\nexport const SHOW_CLASS_TIMEOUT = 10\n\n/**\n * Open popup, add necessary classes and styles, fix scrollbar\n *\n * @param params\n */\nexport const openPopup = (params) => {\n  const container = dom.getContainer()\n  const popup = dom.getPopup()\n\n  if (typeof params.willOpen === 'function') {\n    params.willOpen(popup)\n  }\n\n  const bodyStyles = window.getComputedStyle(document.body)\n  const initialBodyOverflow = bodyStyles.overflowY\n  addClasses(container, popup, params)\n\n  // scrolling is 'hidden' until animation is done, after that 'auto'\n  setTimeout(() => {\n    setScrollingVisibility(container, popup)\n  }, SHOW_CLASS_TIMEOUT)\n\n  if (dom.isModal()) {\n    fixScrollContainer(container, params.scrollbarPadding, initialBodyOverflow)\n    setAriaHidden()\n  }\n\n  if (!dom.isToast() && !globalState.previousActiveElement) {\n    globalState.previousActiveElement = document.activeElement\n  }\n\n  if (typeof params.didOpen === 'function') {\n    setTimeout(() => params.didOpen(popup))\n  }\n\n  dom.removeClass(container, swalClasses['no-transition'])\n}\n\nconst swalOpenAnimationFinished = (event) => {\n  const popup = dom.getPopup()\n  if (event.target !== popup) {\n    return\n  }\n  const container = dom.getContainer()\n  popup.removeEventListener(dom.animationEndEvent, swalOpenAnimationFinished)\n  container.style.overflowY = 'auto'\n}\n\nconst setScrollingVisibility = (container, popup) => {\n  if (dom.animationEndEvent && dom.hasCssAnimation(popup)) {\n    container.style.overflowY = 'hidden'\n    popup.addEventListener(dom.animationEndEvent, swalOpenAnimationFinished)\n  } else {\n    container.style.overflowY = 'auto'\n  }\n}\n\nconst fixScrollContainer = (container, scrollbarPadding, initialBodyOverflow) => {\n  iOSfix()\n\n  if (scrollbarPadding && initialBodyOverflow !== 'hidden') {\n    fixScrollbar()\n  }\n\n  // sweetalert2/issues/1247\n  setTimeout(() => {\n    container.scrollTop = 0\n  })\n}\n\nconst addClasses = (container, popup, params) => {\n  dom.addClass(container, params.showClass.backdrop)\n  // this workaround with opacity is needed for https://github.com/sweetalert2/sweetalert2/issues/2059\n  popup.style.setProperty('opacity', '0', 'important')\n  dom.show(popup, 'grid')\n  setTimeout(() => {\n    // Animate popup right after showing it\n    dom.addClass(popup, params.showClass.popup)\n    // and remove the opacity workaround\n    popup.style.removeProperty('opacity')\n  }, SHOW_CLASS_TIMEOUT) // 10ms in order to fix #2062\n\n  dom.addClass([document.documentElement, document.body], swalClasses.shown)\n  if (params.heightAuto && params.backdrop && !params.toast) {\n    dom.addClass([document.documentElement, document.body], swalClasses['height-auto'])\n  }\n}\n"]},"metadata":{},"sourceType":"module"}