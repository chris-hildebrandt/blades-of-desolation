{"ast":null,"code":"import { reactive } from \"@vue/reactivity\";\nimport { computed } from \"@vue/runtime-core\";\nimport $store from \"@/store/index.js\";\nimport { itemsService } from \"@/services/ItemsService\";\nimport { getRarityFullName } from '@/utils/getRarityFullName';\nimport Item from \"@/components/Item.vue\";\nimport { useToast } from \"vue-toastification\";\nimport Notify from \"@/utils/Notify\";\nexport default {\n  name: 'GeneralShop',\n  components: {\n    Item\n  },\n  props: {\n    storeItems: {\n      type: Object\n    }\n  },\n\n  setup() {\n    const state = reactive({\n      playersGold: computed(() => $store.state.player.gold),\n      quest: null,\n      activeShop: computed(() => $store.state.shop)\n    });\n    return state;\n  },\n\n  methods: {\n    async buy(item) {\n      const toast = useToast();\n\n      if (!(await Notify.confirm('Buy ' + item.name, itemsService.getItemEffectsDisplay(item), 'question', 'Buy'))) {\n        return;\n      }\n\n      if (this.$store.state.player.gold >= item.price) {\n        this.$store.commit('reducePlayerGold', item.price);\n        itemsService.buyItem(item);\n        toast.info('Purchased ' + item.name);\n      } else {\n        toast.warning('Insufficient resources');\n      }\n    },\n\n    getRarityFullName: getRarityFullName\n  }\n};","map":{"version":3,"mappings":"AAgBA,SAASA,QAAT,QAAyB,iBAAzB;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,OAAOC,MAAP,MAAmB,kBAAnB;AACA,SAASC,YAAT,QAA6B,yBAA7B;AACA,SAASC,iBAAT,QAAkC,2BAAlC;AACA,OAAOC,IAAP,MAAiB,uBAAjB;AACA,SAASC,QAAT,QAAyB,oBAAzB;AACA,OAAOC,MAAP,MAAmB,gBAAnB;AACA,eAAe;AACfC,MAAI,EAAE,aADS;AAEfC,YAAU,EAAE;AACRJ;AADQ,GAFG;AAKfK,OAAK,EAAE;AACHC,cAAU,EAAE;AAACC,UAAI,EAAEC;AAAP;AADT,GALQ;;AAQfC,OAAK,GAAE;AACL,UAAMC,KAAI,GAAIf,QAAQ,CAAC;AACrBgB,iBAAW,EAAEf,QAAQ,CAAC,MAAKC,MAAM,CAACa,KAAP,CAAaE,MAAb,CAAoBC,IAA1B,CADA;AAErBC,WAAK,EAAE,IAFc;AAGrBC,gBAAU,EAAEnB,QAAQ,CAAC,MAAKC,MAAM,CAACa,KAAP,CAAaM,IAAnB;AAHC,KAAD,CAAtB;AAKA,WAAON,KAAP;AACD,GAfc;;AAgBfO,SAAO,EAAE;AACP,UAAMC,GAAN,CAAUC,IAAV,EAAe;AACb,YAAMC,KAAI,GAAInB,QAAQ,EAAtB;;AACA,UAAG,EAAE,MAAMC,MAAM,CAACmB,OAAP,CAAe,SAAOF,IAAI,CAAChB,IAA3B,EAAiCL,YAAY,CAACwB,qBAAb,CAAmCH,IAAnC,CAAjC,EAA2E,UAA3E,EAAuF,KAAvF,CAAR,CAAH,EAA0G;AACxG;AACF;;AACA,UAAG,KAAKtB,MAAL,CAAYa,KAAZ,CAAkBE,MAAlB,CAAyBC,IAAzB,IAAiCM,IAAI,CAACI,KAAzC,EAA+C;AAC7C,aAAK1B,MAAL,CAAY2B,MAAZ,CAAmB,kBAAnB,EAAuCL,IAAI,CAACI,KAA5C;AACAzB,oBAAY,CAAC2B,OAAb,CAAqBN,IAArB;AACAC,aAAK,CAACM,IAAN,CAAW,eAAaP,IAAI,CAAChB,IAA7B;AACD,OAJD,MAIK;AACHiB,aAAK,CAACO,OAAN,CAAc,wBAAd;AACF;AACD,KAbM;;AAcP5B,qBAAgB,EAAIA;AAdb;AAhBM,CAAf","names":["reactive","computed","$store","itemsService","getRarityFullName","Item","useToast","Notify","name","components","props","storeItems","type","Object","setup","state","playersGold","player","gold","quest","activeShop","shop","methods","buy","item","toast","confirm","getItemEffectsDisplay","price","commit","buyItem","info","warning"],"sourceRoot":"","sources":["C:\\Users\\dhild\\source\\mini-projects\\blades-of-desolation\\src\\components\\GeneralShop.vue"],"sourcesContent":["<template>\r\n  <div class=\"row pt-2\">\r\n    <div class=\"col-md-6 col-12\">\r\n      <h1 for=\"buy\">Buy Items</h1>\r\n    </div>\r\n  </div>\r\n  <div class=\"row mh-100\">\r\n    <div class=\"col-md-6 col-12\">\r\n      <ul>\r\n        <Item :class=\"getRarityFullName(item.rarity)\" v-for=\"item in storeItems\" :key=\"item.id\" :item=\"item\" display=\"shop\" @click=\"buy(item)\" />\r\n      </ul>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from \"@vue/reactivity\"\r\nimport { computed } from \"@vue/runtime-core\"\r\nimport $store from \"@/store/index.js\"\r\nimport { itemsService } from \"@/services/ItemsService\"\r\nimport { getRarityFullName } from '@/utils/getRarityFullName'\r\nimport Item from \"@/components/Item.vue\"\r\nimport { useToast } from \"vue-toastification\"\r\nimport Notify from \"@/utils/Notify\"\r\nexport default {\r\nname: 'GeneralShop',\r\ncomponents: {\r\n    Item\r\n},\r\nprops: {\r\n    storeItems: {type: Object}\r\n},\r\nsetup(){\r\n  const state = reactive({\r\n    playersGold: computed(()=> $store.state.player.gold),\r\n    quest: null,\r\n    activeShop: computed(()=> $store.state.shop)\r\n  })\r\n  return state\r\n},\r\nmethods: {\r\n  async buy(item){\r\n    const toast = useToast()\r\n    if(!(await Notify.confirm('Buy '+item.name, itemsService.getItemEffectsDisplay(item), 'question', 'Buy'))){\r\n      return\r\n    }\r\n    if(this.$store.state.player.gold >= item.price){\r\n      this.$store.commit('reducePlayerGold', item.price)\r\n      itemsService.buyItem(item)\r\n      toast.info('Purchased '+item.name )\r\n    }else{\r\n      toast.warning('Insufficient resources')\r\n    }\r\n  },\r\n  getRarityFullName : getRarityFullName\r\n}\r\n}\r\n</script>\r\n\r\n<style>\r\nli{\r\n  cursor: pointer;\r\n}\r\n.mh-100{\r\n  height: 75vh;\r\n  overflow-y: auto;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}