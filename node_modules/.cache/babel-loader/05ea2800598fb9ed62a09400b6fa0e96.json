{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, renderList as _renderList, Fragment as _Fragment, normalizeClass as _normalizeClass, createBlock as _createBlock } from \"vue\";\nconst _hoisted_1 = {\n  class: \"pb-2 d-flex justify-content-center\"\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 0\n};\n\nconst _hoisted_4 = /*#__PURE__*/_createTextVNode(\"Map\");\n\nconst _hoisted_5 = {\n  key: 1\n};\n\nconst _hoisted_6 = /*#__PURE__*/_createTextVNode(\"Create\");\n\nconst _hoisted_7 = /*#__PURE__*/_createElementVNode(\"div\", {\n  class: \"pb-2\"\n}, [/*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-secondary\",\n  type: \"button\",\n  \"data-toggle\": \"collapse\",\n  \"data-target\": \"#collapsePouch\",\n  \"aria-expanded\": \"false\",\n  \"aria-controls\": \"collapsePouch\"\n}, \" Pouch \"), /*#__PURE__*/_createElementVNode(\"button\", {\n  class: \"btn btn-secondary\",\n  type: \"button\",\n  \"data-toggle\": \"collapse\",\n  \"data-target\": \"#collapseParty\",\n  \"aria-expanded\": \"false\",\n  \"aria-controls\": \"collapseParty\"\n}, \" Party \")], -1);\n\nconst _hoisted_8 = {\n  class: \"collapse\",\n  id: \"collapsePouch\"\n};\nconst _hoisted_9 = {\n  class: \"d-flex d-md-block justify-content-around h-100\"\n};\n\nconst _hoisted_10 = /*#__PURE__*/_createElementVNode(\"i\", {\n  class: \"fad fa-coins\"\n}, null, -1);\n\nconst _hoisted_11 = /*#__PURE__*/_createElementVNode(\"p\", {\n  class: \"click\",\n  \"data-toggle\": \"modal\",\n  \"data-target\": \"#itemPouchModal\",\n  title: \"items\"\n}, \" Items \", -1);\n\nconst _hoisted_12 = {\n  key: 0,\n  class: \"click\",\n  \"data-toggle\": \"modal\",\n  \"data-target\": \"#questModal\",\n  title: \"quest\"\n};\nconst _hoisted_13 = {\n  class: \"collapse\",\n  id: \"collapseParty\"\n};\nconst _hoisted_14 = [\"onClick\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_ItemPouchModal = _resolveComponent(\"ItemPouchModal\");\n\n  const _component_QuestModal = _resolveComponent(\"QuestModal\");\n\n  const _component_router_link = _resolveComponent(\"router-link\");\n\n  const _component_BattleOptions = _resolveComponent(\"BattleOptions\");\n\n  return _openBlock(), _createElementBlock(_Fragment, null, [_createVNode(_component_ItemPouchModal), _createVNode(_component_QuestModal), _createElementVNode(\"div\", {\n    class: _normalizeClass([\"bg-black text-light side-window\", this.$route.name == 'MapLocation' ? 'window-fluid-sm' : ''])\n  }, [_createElementVNode(\"nav\", _hoisted_1, [_ctx.player.characters.length > 0 ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [this.$route.name != 'MapLocation' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_createVNode(_component_router_link, {\n    to: \"/map\"\n  }, {\n    default: _withCtx(() => [_hoisted_4]),\n    _: 1\n  })])) : _createCommentVNode(\"\", true), _ctx.player.characters.length <= 5 && this.$route.name == 'MapLocation' ? (_openBlock(), _createElementBlock(\"div\", _hoisted_5, [_createVNode(_component_router_link, {\n    to: \"/\"\n  }, {\n    default: _withCtx(() => [_hoisted_6]),\n    _: 1\n  })])) : _createCommentVNode(\"\", true)])) : _createCommentVNode(\"\", true)]), _hoisted_7, _createElementVNode(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", null, [_createTextVNode(_toDisplayString(_ctx.player.gold) + \" \", 1), _hoisted_10]), _hoisted_11, this.$store.state.player.quest?.target ? (_openBlock(), _createElementBlock(\"p\", _hoisted_12, \" Quest \")) : _createCommentVNode(\"\", true)])]), _createElementVNode(\"div\", _hoisted_13, [(_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_ctx.player.characters, character => {\n    return _openBlock(), _createElementBlock(\"div\", {\n      class: \"h-100\",\n      key: character.id\n    }, [_createElementVNode(\"p\", {\n      class: \"click\",\n      \"data-toggle\": \"modal\",\n      \"data-target\": \"#characterDetailsModal\",\n      title: \"stats\",\n      onClick: $event => $options.selectCharacter(character)\n    }, _toDisplayString(character.name), 9, _hoisted_14)]);\n  }), 128))]), this.$route.name !== 'battleField' ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: _normalizeClass([\"btn btn-success float-bottom\", _ctx.player.characters.length > 0 ? '' : 'd-none']),\n    onClick: _cache[0] || (_cache[0] = (...args) => $options.saveGame && $options.saveGame(...args))\n  }, \"Save\", 2)) : _createCommentVNode(\"\", true), _createElementVNode(\"button\", {\n    class: _normalizeClass([\"btn btn-success float-bottom\", _ctx.player.characters.length < 1 ? '' : 'd-none']),\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.loadGame && $options.loadGame(...args))\n  }, \"Load Game\", 2), this.$route.name !== 'battleField' && this.$route.name !== 'MainShop' ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 1,\n    class: _normalizeClass([\"btn btn-primary float-bottom\", _ctx.player.characters.length > 0 ? '' : 'd-none']),\n    onClick: _cache[2] || (_cache[2] = (...args) => $options.rest && $options.rest(...args))\n  }, \"Rest (unsafe)\", 2)) : _createCommentVNode(\"\", true), _ctx.$route.name == 'battleField' && _ctx.monstersWithHp > 0 ? (_openBlock(), _createBlock(_component_BattleOptions, {\n    key: 2\n  })) : _createCommentVNode(\"\", true)], 2)], 64);\n}","map":{"version":3,"mappings":"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","names":["class","_createElementVNode","type","id","title","_createVNode","_component_ItemPouchModal","_component_QuestModal","$route","name","_ctx","characters","length","_createElementBlock","_hoisted_2","_hoisted_3","_component_router_link","to","_hoisted_5","_hoisted_7","gold","_hoisted_10","_hoisted_11","$store","state","player","quest","target","_Fragment","_renderList","character","key","onClick","$options","_hoisted_14","_createBlock","_component_BattleOptions"],"sourceRoot":"","sources":["C:\\Users\\dhild\\source\\mini-projects\\blades-of-desolation\\src\\components\\PlayerStatsSideWindow.vue"],"sourcesContent":["<template>\r\n  <ItemPouchModal />\r\n  <QuestModal />\r\n  <div class=\"bg-black text-light side-window\" :class=\"this.$route.name == 'MapLocation' ? 'window-fluid-sm' : ''\">\r\n    <nav class=\"pb-2 d-flex justify-content-center\">\r\n      <div v-if=\"player.characters.length > 0\">\r\n        <div v-if=\"this.$route.name != 'MapLocation'\">\r\n          <router-link to=\"/map\">Map</router-link>\r\n        </div>\r\n        <div v-if=\"player.characters.length <= 5 && this.$route.name == 'MapLocation'\">\r\n          <router-link to=\"/\">Create</router-link>\r\n        </div>\r\n      </div>\r\n    </nav>\r\n    <div class=\"pb-2\">\r\n      <button class=\"btn btn-secondary\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapsePouch\" aria-expanded=\"false\" aria-controls=\"collapsePouch\">\r\n        Pouch\r\n      </button>\r\n      <button class=\"btn btn-secondary\" type=\"button\" data-toggle=\"collapse\" data-target=\"#collapseParty\" aria-expanded=\"false\" aria-controls=\"collapseParty\">\r\n        Party\r\n      </button>\r\n    </div>\r\n    <div class=\"collapse\" id=\"collapsePouch\">\r\n      <div class=\"d-flex d-md-block justify-content-around h-100\">\r\n        <span>{{player.gold}} <i class=\"fad fa-coins\"></i></span>\r\n        <p class=\"click\" data-toggle=\"modal\" data-target=\"#itemPouchModal\" title=\"items\">\r\n          Items\r\n        </p>\r\n        <p v-if=\"this.$store.state.player.quest?.target\" class=\"click\" data-toggle=\"modal\" data-target=\"#questModal\" title=\"quest\">\r\n          Quest\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <div class=\"collapse\" id=\"collapseParty\">\r\n      <div class=\"h-100\" v-for=\"character in player.characters\" :key=\"character.id\">\r\n        <p class=\"click\" data-toggle=\"modal\" data-target=\"#characterDetailsModal\" title=\"stats\" @click=\"selectCharacter(character)\">\r\n          {{character.name}}\r\n        </p>\r\n      </div>\r\n    </div>\r\n    <button v-if=\"this.$route.name !== 'battleField'\" class=\"btn btn-success float-bottom\" :class=\"player.characters.length > 0 ? '' : 'd-none'\" @click=\"saveGame\">Save</button>\r\n    <button class=\"btn btn-success float-bottom\" :class=\"player.characters.length < 1 ? '' : 'd-none'\" @click=\"loadGame\">Load Game</button>\r\n    <button v-if=\"this.$route.name !== 'battleField' && this.$route.name !== 'MainShop'\" class=\"btn btn-primary float-bottom\" :class=\"player.characters.length > 0 ? '' : 'd-none'\" @click=\"rest\">Rest (unsafe)</button>\r\n    <BattleOptions v-if=\"$route.name == 'battleField' && monstersWithHp > 0\" />\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { reactive } from \"@vue/reactivity\"\r\nimport { computed } from \"@vue/runtime-core\"\r\nimport $store from '@/store/index.js'\r\nimport Notify from \"@/utils/Notify\"\r\nimport ItemPouchModal from \"./ItemPouchModal.vue\"\r\nimport QuestModal from \"./QuestModal.vue\"\r\nimport { Item } from \"@/models/Item\"\r\nimport { characterService } from \"@/services/CharacterService\"\r\nimport { Spell } from \"@/models/Spell\"\r\nimport BattleOptions from '@/components/BattleOptions'\r\nimport router from \"@/router\"\r\nimport { Ability } from \"@/models/Ability\"\r\nimport { useToast } from \"vue-toastification\"\r\n\r\nexport default {\r\n  components: { ItemPouchModal, QuestModal, BattleOptions },\r\n  inheritAttrs: false,\r\n  setup(){\r\n    const state = reactive({\r\n      player: computed(()=> $store.state.player),\r\n      monstersWithHp: computed(()=> $store.state.combatMonsters.filter(m => m.hp > 0).length),\r\n    })\r\n    return state\r\n  },\r\n  methods: {\r\n    selectCharacter(character){\r\n      $store.state.selected = character\r\n    },\r\n    saveGame(){\r\n      const toast = useToast()\r\n      window.localStorage.setItem(\"player\", JSON.stringify(this.$store.state.player))\r\n      toast.success('Game Saved!')\r\n    },\r\n    loadGame(){\r\n      const toast = useToast()\r\n      this.$store.state.player = JSON.parse(window.localStorage.getItem(\"player\"))\r\n      this.$store.state.player.items.forEach((i, index) => {\r\n        this.$store.state.player.items[index] = new Item(i)\r\n      })\r\n      this.$store.state.player.characters.forEach((c, index) => {\r\n        characterService.loadCharacter(index, c)\r\n        c.abilities.forEach((a, andex) => {\r\n          this.$store.state.player.characters[index].abilities[andex] = new Ability(a)\r\n        })\r\n        c.equipment.forEach((e, endex) => {\r\n          this.$store.state.player.characters[index].equipment[endex] = new Item(e)\r\n        })\r\n        c.spells.forEach((s, sndex)=> {\r\n          this.$store.state.player.characters[index].spells[sndex] = new Spell(s)\r\n        })\r\n      })\r\n      this.$store.state.location = parseInt(this.$store.state.player.currentLocation[0])\r\n      toast.success('Game Loaded!')\r\n      router.push({name: 'AreaLocation'})\r\n    },\r\n    async rest(){\r\n      const toast = useToast()\r\n      if(!JSON.parse(window.localStorage.getItem(\"Wild Rest Warning\"))){\r\n        if(!await Notify.confirm('Wild Rest Warning', 'Are you sure you want to rest in the unprotected wild? You may be attacked or robbed? Continue?')){\r\n          return\r\n        }\r\n        window.localStorage.setItem(\"Wild Rest Warning\", JSON.stringify('skip'))\r\n      }\r\n      let chance = Math.ceil(Math.random()*100)+($store.state.location*2)\r\n      let partyLuck = characterService.getPartyLuck()+50\r\n      if(partyLuck > chance){\r\n        $store.state.player.characters.forEach(c => {\r\n          c.hp = c.hp + Math.round(c.baseHp*.25) > c.baseHp ? c.baseHp : c.hp+Math.round(c.baseHp*.25)\r\n          c.magic = c.baseMagic\r\n          c.abilities.forEach(a => a.uses = a.baseUses)\r\n          c.actions = c.baseActions\r\n        })\r\n        toast.success('Successfully Rested!')\r\n        return\r\n      }\r\n      if((chance-partyLuck) > 15 && $store.state.player.gold > 0){\r\n        router.push({name: 'battleField'})\r\n      }else if((chance-partyLuck) > 1 && $store.state.player.items.length > 0){\r\n        let lostGold = Math.round($store.state.player.gold*((chance-partyLuck)/100))\r\n        toast.warning('Your rest is interupted by thieves, fornately you are unharmed. Unforunately you lost '+lostGold+' Gold', {timeout: 10000})\r\n        $store.state.player.gold -= lostGold\r\n      }else{\r\n        let itemIndex = Math.floor(Math.random()*$store.state.player.items.length)\r\n        let lostItem = $store.state.player.items[itemIndex]\r\n        let locIndex = Math.floor(Math.random()*$store.state.player.explored[$store.state.location].length)\r\n        $store.state.player.currentLocation = $store.state.player.explored[$store.state.location][locIndex]\r\n        toast.warning('Your rest turns out to be full of nightmares and vivid dreams, it appears you wondered off in your sleep. You also realize you are missing '+lostItem.name, {timeout: 10000})\r\n        $store.state.player.items.splice(itemIndex, 1)\r\n      }\r\n      // saveGame()\r\n    }\r\n\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n@media screen and (min-width: 992px) {\r\n  .side-window{\r\n    width: 20vw;\r\n    min-height: 100%;\r\n  }\r\n}\r\n@media screen and (max-width: 992px) {\r\n  .side-window{\r\n    width: 100vw;\r\n  }\r\n  .window-fluid-sm{\r\n    width: 1100px;\r\n  }\r\n}\r\n.bg-black{\r\n  background-color: black;\r\n}\r\n</style>"]},"metadata":{},"sourceType":"module"}